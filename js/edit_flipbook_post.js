"use strict";var pluginDir=function(e){var t=(e=document.getElementsByTagName("script"))[e.length-1];return void 0!==t.getAttribute.length?t.src.split("js/edit_flipbook")[0]:t.getAttribute("src",-1).split("js/edit_flipbook")[0]}();!function(e){e(document).ready((function(){postboxes.save_state=function(){},postboxes.save_order=function(){},postboxes.handle_click&&!postboxes.handle_click.guid&&postboxes.add_postbox_toggles();e("#edit-page-modal-wrapper").appendTo(e("body"));var t,o=e("#edit-page-modal"),n=e(".media-modal-backdrop");if(FLIPBOOK&&FLIPBOOK.PageEditor)var a=new FLIPBOOK.PageEditor(o);function i(){o.hide(),n.hide(),e("body").css("overflow","auto")}e(".media-modal-close").click(i),e("#real3dflipbook-admin").show();var l=null;e(".creating-page").hide();var r=r||c.b,s=s||c.d;if(r(options),options.pages){if(!Array.isArray(options.pages)){var p=[];for(var d in options.pages)p[d]=options.pages[d];options.pages=p}for(var d in options.pages)options.pages[d]=options.pages[d]||{},options.pages[d].htmlContent&&(options.pages[d].htmlContent=unescape(options.pages[d].htmlContent)),options.pages[d].items&&options.pages[d].items.forEach((function(e,t){options.pages[d].items[t].url&&(options.pages[d].items[t].url=unescape(options.pages[d].items[t].url))}))}M("mode","dropdown","Mode","<strong>normal</strong> - embedded in a container div<br/><strong>lightbox</strong> - opens in fullscreen overlay on click<br/><strong>fullscreen</strong> - covers entire page",["normal","lightbox","fullscreen"]),M("viewMode","dropdown","View mode","<strong>webgl</strong> - realistic 3D page flip with lights and shadows<br/><strong>3d</strong> - CSS 3D flip<br/><strong>swipe</strong> - horizontal swipe<br/><strong>simple</strong> - no animation",["webgl","3d","2d","swipe","scroll","simple"]),M("containerRatio","text","Container aspect ratio","Width / height ratio of flipbook container"),M("zoomMin","text","Initial zoom","Initial book zoom, recommended between 0.8 and 1",null,!0),M("zoomStep","text","Zoom step","Between 1.1 and 4",null,!0),M("zoomSize","text","Zoom size","Override maximum zoom, for example 4000 will zoom the page until page height on screen is 4000px)",null,!0),M("zoomReset","checkbox","Reset Zoom","Reset zoom after page flip, window resize, exit from fullscreen or toggle toc, thumbs, bookmarks, search",null,!0),M("doubleClickZoom","checkbox","Double click zoom",null,!0),M("pageDrag","checkbox","Turn pages with click and drag"),M("singlePageMode","checkbox","Single page view","Display one page at a time"),M("pageFlipDuration","text","Flip duration","Duration of flip animation, recommended between 0.5 and 2"),M("sound","checkbox","Page flip sound"),M("backgroundMusic","selectFile","Background music .mp3"),M("startPage","text","Start page","Open flipbook at this page at start"),M("pageNumberOffset","text","Page number offset","to start the book page count at different page, example Cover, 1, 2"),M("deeplinking[enabled]","checkbox","Deep linking","enable to use URL hash to link to specific page, for example #2 will open page 2",null,!0),M("deeplinking[prefix]","text","Deep linking prefix",'custom deep linking prefix, for example "book1_", link to page 2 will have URL hash #book1_2',null,!0),M("responsiveView","checkbox","Responsive view","Switching from two page layout to one page layout if flipbook width is below certain treshold"),M("responsiveViewTreshold","text","Responsive view treshold","Treshold (container width in px) under which responsive view is activated"),M("responsiveViewRatio","text","Responsive view ratio","Aspect ratio (container width / height) under which responsive view is activated"),M("pageTextureSize","text","PDF page size (full)","height of rendered PDF pages in px.",null,!0),M("pageTextureSizeSmall","text","PDF page size (small)","height of rendered PDF pages in px",null,!0),M("minPixelRatio","text","Minimum Pixel ratio","Override device pixel ratio to force higher quality for WebGL."),M("pdfTextLayer","checkbox","PDF text layer","Enable for text selection tool and text search, disable for faster page loading",null,!0),M("pdfAutoLinks","checkbox","PDF auto links","Automatically convert PDF text to links",null,!0),M("disableRange","checkbox","Disable PDF Range requests","Disable partial PDF download",null,!0),M("linkColor","color","Page links color","",null,!0),M("linkColorHover","color","Page links hover color","",null,!0),M("linkOpacity","text","Page links opacity","",null,!0),M("linkTarget","dropdown","Page links target","Open PDF links in new window, same window or lightbox",[{display:"New Window",value:"_blank"},{display:"Same Window",value:"_self"},{display:"Spotlight (Lightbox)",value:"spotlight"}],!0),M("cover","checkbox","Front cover","Disable cover for viewing only inner pages (1-2, 3-4, ...) "),M("backCover","checkbox","Back cover"),M("scaleCover","checkbox","Scale cover","Force cover and spreads when all pages are the same size"),M("pageCaptions","checkbox","Page Captions","Show page captions"),M("thumbnailsOnStart","checkbox","Show Thumbnails on start","",null,!0),M("contentOnStart","checkbox","Show Table of Contents on start","",null,!0),M("searchOnStart","text","Search PDF on start","",null,!0),M("searchResultsThumbs","checkbox","Show search results as page thumbnails","",null,!0),M("tableOfContentCloseOnClick","checkbox","Close Table of Contents when page is clicked","",null,!0),M("thumbsCloseOnClick","checkbox","Close Thumbnails when page is clicked","",null,!0),M("autoplayOnStart","checkbox","Autoplay on start"),M("autoplayLoop","checkbox","Autoplay loop"),M("autoplayInterval","text","Autoplay interval (ms)"),M("rightToLeft","checkbox","Right to left mode","Flipping from right to left (inverted)"),M("thumbSize","text","Thumbnail size","Thumbnail height for thumbnails view"),M("logoImg","selectImage","Logo image","Logo image that will be displayed inside the flipbook container"),M("logoUrl","text","Logo link","URL that will be opened on logo click"),M("logoUrlTarget","dropdown","Logo link target","Open in new window",["_blank","_self"]),M("logoCSS","textarea","Logo CSS","Custom CSS for logo"),M("menuSelector","text","Menu css selector",'Example "#menu" or ".navbar". Used with mode "fullscreen" so the flipbook will be resized correctly below the menu'),M("zIndex","text","Container z-index","Set z-index of flipbook container"),M("preloaderText","text","Preloader text","Text that will be displayed under the preloader spinner"),M("googleAnalyticsTrackingCode","text","Google analytics tracking code","",null,!0),M("pdfBrowserViewerIfIE","checkbox","Download PDF instead of displaying flipbook if browser is Internet Explorer","For PDF flipbook"),M("arrowsAlwaysEnabledForNavigation","checkbox","Force keyboard arrows for navigation","Enable keyboard arrows for navigation even if not fullscreen"),M("arrowsDisabledNotFullscreen","checkbox","Disable arrows for navigation if not fullscreen","Disable arrows for navigation if not fullscreen"),M("touchSwipeEnabled","checkbox","Touch swipe to turn page","Turn pages with touch & swipe or click & drag"),M("fitToWidth","checkbox","Fit to width","Fit flipbook to width (for scroll view mode)"),M("rightClickEnabled","checkbox","Right click context menu","Disable to prevent right click image download",null,!0),M("access","dropdown","Access","Direct access to flipbook (flipbook permalink)",["full","woo_subscription","none"],!0),U("mobile[pdfUrl]","selectFile","PDF URL","Use different PDF file on mobile, useful if you have PDF version that is optimized for mobile (larger text etc.)"),U("modeMobile","dropdown","Mode","Override default mode for mobile",["","normal","lightbox","fullscreen"]),U("viewModeMobile","dropdown","View mode","Override default view mode for mobile",["","webgl","3d","2d","swipe","scroll","simple"]),U("mobile[containerRatio]","text","Container aspect ratio","Width / height ratio of flipbook container"),U("pageTextureSizeMobile","text","PDF page size (full)","The height of rendered PDF pages in px"),U("pageTextureSizeMobileSmall","text","PDF page size (small)","The height of rendered PDF pages in px"),U("singlePageModeIfMobile","checkbox","Single page view","Display one page at a time"),U("mobile[contentOnStart]","checkbox","Show Table of Contents on start"),U("mobile[thumbnailsOnStart]","checkbox","Show Thumbnails on start"),U("logoHideOnMobile","checkbox","Hide logo"),U("mobile[currentPage][enabled]","checkbox","Currernt Page"),U("mobile[pagesInMemory]","text","Pages in memory","Number of pages that will be kept in memory (webgl mode)"),U("mobile[bitmapResizeHeight]","text","Bitmap resize height","Resize image to this height before rendering (webgl mode)"),U("mobile[bitmapResizeQuality]","dropdown","Bitmap resize quality","Bitmap resize quality (webgl mode)",["","low","medium","heigh"]),E("lightboxCssClass","text","CSS class","CSS class that will trigger lightbox. Add this CSS class to any element that you want to trigger lightbox (Flipbook shortcode needs to be on the page)"),E("lightboxBackground","color","Overlay background","CSS value"),E("lightboxBackgroundPattern","selectImage","Overlay background pattern","Lightbox background image (repeated)"),E("lightboxBackgroundImage","selectImage","Overlay background image","Lightbox background image"),E("lightboxContainerCSS","textarea","Thumbnail container CSS"),E("lightboxThumbnailUrl","selectImage","Thumbnail","Image that will be displayed in place of shortcode, and will trigger lightbox on click");var u=e("input[name='lightboxThumbnailUrl']").parent();e('<a class="generate-thumbnail-button button-secondary button80" href="#">Generate thumbnail</a>').appendTo(u);function g(e){H(e,e+"[enabled]","checkbox","Enabled"),H(e,e+"[title]","text","Title"),H(e,e+"[vAlign]","dropdown","Vertical align","",["top","bottom"]),H(e,e+"[hAlign]","dropdown","Horizontal align","",["right","left","center"]),H(e,e+"[order]","text","Order")}async function b(){document.body.classList.add("pdf-flipbook"),pdfjsLib.GlobalWorkerOptions.workerSrc=pluginDir+"js/pdf.worker.min.js";var o={cMapPacked:!0,cMapUrl:pluginDir+"js/cmaps/",disableRange:options.disableRange,disableAutoFetch:!0,disableStream:!0,url:options.pdfUrl};"https:"==location.protocol?o.url=o.url.replace("http://","https://"):"http:"==location.protocol&&(o.url=o.url.replace("https://","http://"));try{l=await h(o)}catch(e){}t=1,await async function(t){var o=t._pdfInfo.numPages;const n=(await t.getPage(1)).getViewport({scale:1});if(me(0,n.width/n.height),o>1){const e=(await t.getPage(2)).getViewport({scale:1}),n=e.width/e.height,a=(await t.getPage(o)).getViewport({scale:1}),l=a.width/a.height;for(var i=1;i<o;i++){me(i,o-1==i?l:n)}}e(".page-delete").hide(),a&&a.setPages(options.pages);return}(l),await se(),await he(l),FLIPBOOK.PDFTools?options.id&&e("#r3d-convert").show().click((function(t){t.preventDefault(),e(this).hide(),function(){const t=new FLIPBOOK.PDFTools,o=window.options.globals.pdfTools,n=e("#add-pages-info"),i=e("#add-pages-description"),r=e("#r3d-select-source"),s=e("#r3d-pdf-source"),p=e("#pages-container").addClass("ui-sortable"),c=options.pages;Z(),c&&c.forEach((function(e,t){options.pages[t]={},e.items&&(options.pages[t].items=e.items),e.htmlContent&&(options.pages[t].htmlContent=e.htmlContent)}));a&&a.setPages(options.pages);Q(),le("type","jpg"),le("pdfUrl");const d=p.find(".page").length;o.plugins_url=options.globals.plugins_url,o.bookId=options.id,o.security=options.security,o.startIndex=d,t.convertPDF(l,o);for(let e=0;e<l._pdfInfo.numPages;e++)Y(d+e).appendTo(p).hide().click((function(e){ce(this.dataset.index)}));n.show().text("Loading PDF..."),i.hide(),r.prop("disabled",!0),s.prop("disabled",!0),t.eventBus.on("outlineloaded",(function(t){if(t.outline&&t.outline.length){o.tableOfContent=t.outline;for(var n=e("#toc-items").empty(),a=0;a<o.tableOfContent.length;a++){var i=o.tableOfContent[a];X(i.title,i.page,i.items,i.dest).appendTo(n)}}})),t.eventBus.on("pagesaved",(function(e){options.pages=options.pages||[],options.pages[e.index]=options.pages[e.index]||{},options.pages[e.index].src=e.src,options.pages[e.index].thumb=e.thumb,e.json&&(options.pages[e.index].json=e.json);const t=Number(e.index)+Number(d),o=p.find('.page[data-index="'+t+'"]').show();o.find(".page-img img")[0].src=e.thumb,o.find(".page-src").val(e.src),o.find(".page-thumb").val(e.thumb),o.find(".page-json").val(e.json);const a=options.pages[t];if(a){const e=a.htmlContent;e&&o.find(".page-html-content").val(escape(e))}0==e.index&&se(),e.pageNumber==e.total?(n.hide(),i.show(),r.prop("disabled",!1),s.prop("disabled",!1)):n.text("Added page "+e.pageNumber+" of "+e.total)}))}()})):e("#buy-pdf-tools").show()}async function h(e){let t=null;try{t=await pdfjsLib.getDocument(e).promise}catch(t){if("PasswordException"!==t.name)throw t;if(t.code===pdfjsLib.PasswordResponses.NEED_PASSWORD){const t=prompt("This document requires a password:");if(t)return e.password=t,h(e);throw new Error("Password required but not provided.")}if(t.code===pdfjsLib.PasswordResponses.INCORRECT_PASSWORD){alert("Incorrect password. Please try again.");const t=prompt("Please enter the correct password:");if(t)return e.password=t,h(e);throw new Error("Password required but not provided.")}}return t}function m(){window.innerHeight+window.scrollY>=document.body.scrollHeight-50?(e("#r3d-save").removeClass("r3d-save-sticky"),e("#r3d-save-holder").hide()):(e("#r3d-save").addClass("r3d-save-sticky"),e("#r3d-save-holder").show())}E("lightboxThumbnailHeight","text","Thumbnail height","Height of thumbnail that will be generated from PDF"),E("lightboxThumbnailUrlCSS","textarea","Thumbnail CSS","Custom CSS for lightbox thumbnail image"),E("lightboxThumbnailInfo","checkbox","Thumbnail info","book info displayed over thumbnail"),E("lightboxThumbnailInfoText","text","Thumbnail info text","if not set book name will be used"),E("lightboxThumbnailInfoCSS","textarea","Thumbnail info CSS","custom CSS"),E("lightboxText","text","Text link","Text that will be displayed in place of shortcode"),E("lightboxTextCSS","textarea","Text link CSS","Custom CSS for text link"),E("lightboxTextPosition","dropdown","Text link position","Text link above or below the thumbnail",["top","bottom"]),E("lightBoxOpened","checkbox","Opened on start","Lightbox will open automatically on page load"),E("lightBoxFullscreen","checkbox","Openes in fullscreen","Opening the lightbox will put lightbox element to real fullscreen"),E("lightboxStartPage","text","Lightbox start page","Open lightbox always as specific page, for example 1"),E("showTitle","checkbox","Show title"),E("showDate","checkbox","Show date"),E("hideThumbnail","checkbox","Hide thumbnail"),E("lightboxMarginV","text","Vertical margin","Lightbox overlay vertical margin"),E("lightboxMarginH","text","Horizontal margin","Lightbox overlay horizontal margin"),E("lightboxLink","text","Link","Open URL (instead of opening flipbook)"),E("lightboxLinkNewWindow","checkbox","Link opens in new window"),g("currentPage"),g("btnAutoplay"),g("btnNext"),g("btnPrev"),g("btnFirst"),g("btnLast"),g("btnZoomIn"),g("btnZoomOut"),g("btnToc"),g("btnThumbs"),g("btnShare"),g("btnSound"),g("btnExpand"),g("btnDownloadPages"),g("btnDownloadPdf"),g("btnPrint"),g("btnSingle"),g("btnSearch"),g("search"),g("btnBookmark"),g("btnTools"),g("btnClose"),H("btnDownloadPages","btnDownloadPages[url]","selectFile","URL of zip file containing all pages"),H("btnDownloadPdf","btnDownloadPdf[url]","selectFile","PDF file URL"),H("btnDownloadPdf","btnDownloadPdf[forceDownload]","checkbox","force download"),H("btnDownloadPdf","btnDownloadPdf[openInNewWindow]","checkbox","open PDF in new browser window"),H("btnPrint","printPdfUrl","selectFile","PDF file for printing"),H("share-buttons","shareTitle","text","Share Title","Title that will be used for sharing"),H("share-buttons","shareUrl","text","Share URL","URL that will be shaed, if not set it will use the website URL"),H("share-buttons","shareImage","text","Share Image","URL of the image for sharing"),H("share-buttons","facebook[enabled]","checkbox","Facebook"),H("share-buttons","twitter[enabled]","checkbox","Twitter"),H("share-buttons","pinterest[enabled]","checkbox","Pinterest"),H("share-buttons","email[enabled]","checkbox","Email"),H("share-buttons","reddit[enabled]","checkbox","Reddit"),H("share-buttons","digg[enabled]","checkbox","Digg"),H("share-buttons","linkedin[enabled]","checkbox","LinkedIn"),H("share-buttons","whatsapp[enabled]","checkbox","Whatsapp"),_("pagesInMemory","text","Pages in memory","Number of pages that will be kept in memory",null),_("lights","checkbox","Lights","realistic lightning, disable for faster performance"),_("lightPositionX","text","Light pposition x","between -500 and 500"),_("lightPositionY","text","Light position y","between -500 and 500"),_("lightPositionZ","text","Light position z","between 1000 and 2000"),_("lightIntensity","text","Light intensity","between 0 and 1"),_("shadows","checkbox","Shadows","realistic page shadows, disable for faster performance"),_("shadowOpacity","text","Shadow opacity","between 0 and 1"),_("pageHardness","text","Page hardness","between 1 and 5"),_("coverHardness","text","Cover hardness","between 1 and 5"),_("pageRoughness","text","Page material roughness","between 0 and 1"),_("pageMetalness","text","Page material metalness","between 0 and 1"),_("pageSegmentsW","text","Page segments W","between 3 and 20"),_("pageMiddleShadowSize","text","Page middle shadow size","shadow in the middle of the book"),_("pageMiddleShadowColorL","color","left page middle shadow color"),_("pageMiddleShadowColorR","color","right page middle shadow color"),_("antialias","checkbox","Antialiasing","disable for faster performance"),_("pan","text","Camera pan angle","between -10 and 10"),_("tilt","text","Camera tilt angle","between -30 and 0"),_("rotateCameraOnMouseDrag","checkbox","rotate camera on mouse drag"),_("panMax","text","Camera pan max angle","between 0 and 20"),_("panMin","text","Camera pan min angle","between -20 and 0"),_("tiltMax","text","Camera tilt max angle","between -60 and 0"),_("tiltMin","text","Camera tilt min angle","between -60 and 0"),_("cornerCurl","checkbox","Corner curl","Corner curl animation on cover page"),_("bitmapResizeHeight","text","Bitmap resize height","Resize image to this height before rendering (webgl mode)"),_("bitmapResizeQuality","dropdown","Bitmap resize quality","Bitmap resize quality (webgl mode)",["","low","medium","heigh"]),H("menu-bar-2","menu2Background","color","Background color","custom CSS"),H("menu-bar-2","menu2Shadow","text","Shadow","custom CSS"),H("menu-bar-2","menu2Margin","text","Margin"),H("menu-bar-2","menu2Padding","text","Padding"),H("menu-bar-2","menu2OverBook","checkbox","Over book","menu covers the book (overlay)"),H("menu-bar-2","menu2Transparent","checkbox","Transoarent","menu has no background"),H("menu-bar-2","menu2Floating","checkbox","Floating","small menu floating over book, not full width"),H("menu-bar","menuBackground","color","Background color","custom CSS"),H("menu-bar","menuShadow","text","Shadow","custom CSS"),H("menu-bar","menuMargin","text","Margin"),H("menu-bar","menuPadding","text","Padding"),H("menu-bar","menuOverBook","checkbox","Over book","menu covers the book (overlay)"),H("menu-bar","menuTransparent","checkbox","Transoarent","Menu has no background"),H("menu-bar","menuFloating","checkbox","Floating","small menu floating over book, not full width"),H("menu-bar","hideMenu","checkbox","Hide menu","hide menu completely"),H("menu-buttons","btnColor","color","Color"),H("menu-buttons","btnColorHover","color","Hover color"),H("menu-buttons","btnBackground","color","Background color"),H("menu-buttons","btnBackgroundHover","color","Background hover color"),H("menu-buttons","btnRadius","text","Radius","px"),H("menu-buttons","btnMargin","text","Margin","px"),H("menu-buttons","btnSize","text","Size","between 8 and 20"),H("menu-buttons","btnPaddingV","text","Padding vertical","between 0 and 20"),H("menu-buttons","btnPaddingH","text","Padding horizontal","between 0 and 20"),H("menu-buttons","btnShadow","text","Box shadow","custom CSS"),H("menu-buttons","btnTextShadow","text","Text shadow","custom CSS"),H("menu-buttons","btnBorder","text","Border","custom CSS"),H("side-buttons","sideNavigationButtons","checkbox","Enabled","Arrows on the sides"),H("side-buttons","menuNavigationButtons","checkbox","Arrows in the menu","Show also the arrows in the menu"),H("side-buttons","arrowColor","color","Color"),H("side-buttons","arrowColorHover","color","Hover color"),H("side-buttons","arrowBackground","color","Background color"),H("side-buttons","arrowBackgroundHover","color","Background hover color"),H("side-buttons","arrowRadius","text","Radius","px"),H("side-buttons","arrowMargin","text","Margin","px"),H("side-buttons","arrowSize","text","Size","Side buttons margin size, between 8 and 50"),H("side-buttons","arrowPadding","text","Padding","Side buttons padding, between 0 and 10"),H("side-buttons","arrowTextShadow","text","Text shadow","custom CSS"),H("side-buttons","arrowBorder","text","Border","custom CSS"),H("current-page","currentPagePositionV","dropdown","Current page display vertical position","Vertical position",["top","bottom"]),H("current-page","currentPagePositionH","dropdown","Horizontal position","Current page display horizontal position",["left","right"]),H("current-page","currentPageMarginV","text","Vertical margin","between 0 and 10"),H("current-page","currentPageMarginH","text","Horizontal margin","between 0 and 10"),H("ui","layout","dropdown","UI Layout","select one of premade UI layouts",["1","2","3","4"]),H("ui","skin","dropdown","Skin","select one of premade skins",["light","dark","gradient"]),H("skin","skinColor","color","Color","global UI color, CSS value"),H("ui","icons","dropdown","Icon set","choose Font Awesome or Material icons",["font awesome","material"]),H("skin","skinBackground","color","Background color","global UI background color, CSS value"),H("menu-floating","floatingBtnColor","color","Color","CSS value"),H("menu-floating","floatingBtnColorHover","color","Hover color","CSS value"),H("menu-floating","floatingBtnBackground","color","Background color","CSS value"),H("menu-floating","floatingBtnBackgroundHover","color","Background hover color","CSS value"),H("menu-floating","floatingBtnSize","text","Size"),H("menu-floating","floatingBtnRadius","text","Radius"),H("menu-floating","floatingBtnBorder","text","Border","CSS value"),H("menu-floating","floatingBtnMargin","text","Margin","CSS value"),H("menu-floating","floatingBtnPadding","text","Padding","CSS value"),H("menu-floating","floatingBtnShadow","text","Box shadow","CSS value"),H("menu-floating","floatingBtnTextShadow","text","Text shadow","CSS value"),H("close-button","btnClose[color]","color","Color","CSS value"),H("close-button","btnClose[background]","color","Background color","CSS value"),H("close-button","btnClose[colorHover]","color","Hover color","CSS value"),H("close-button","btnClose[backgroundHover]","color","Background hover color","CSS value"),H("close-button","btnClose[size]","text","Size","px"),H("close-button","btnClose[border]","text","Border","CSS value"),H("close-button","btnClose[radius]","text","Radius","px"),H("sidebar","sideMenuOverBook","checkbox","Over book layer"),H("sidebar","sideMenuOverMenu","checkbox","Over bottom menu"),H("sidebar","sideMenuOverMenu2","checkbox","Over top menu"),H("bg","backgroundColor","color","Color","CSS value, example #333 or rgba(0,0,0,0.5)"),H("bg","backgroundPattern","selectImage","Image pattern (repeat)","Flipbook container background pattern"),H("bg","backgroundImage","selectImage","Image","Flipbook container background image"),H("bg","backgroundTransparent","checkbox","Transparent","Flipbook container will have transparent background"),le("pdfUrl",options.pdfUrl),e(".r3d-pro").removeClass("r3d-pro"),e(".r3d-pro-content").removeClass("r3d-pro-content"),e("input.alpha-color-picker").alphaColorPicker(),e(".copy-shortcode").click((function(){var t="[real3dflipbook id='"+e(this).attr("id")+"']";if(navigator.clipboard)navigator.clipboard.writeText(t).then((()=>{e(this).text("Copied!"),setTimeout((()=>{e(this).text("Copy")}),2e3)})).catch((()=>{e(this).text("Error"),setTimeout((()=>{e(this).text("Copy")}),2e3)}));else{var o=document.createElement("textarea");o.value=t,document.body.appendChild(o),o.select(),document.execCommand("copy"),document.body.removeChild(o),e(this).text("Copied!"),setTimeout((()=>{e(this).text("Copy")}),2e3)}})),e("#real3dflipbook-admin .nav-tab").click((function(t){t.preventDefault(),e("#real3dflipbook-admin .tab-active").hide(),e(".nav-tab-active").removeClass("nav-tab-active");var o=jQuery(this).addClass("nav-tab-active"),n="#"+o.attr("data-tab");jQuery(n).addClass("tab-active").fadeIn(),window.location.hash=o.attr("data-tab").split("-")[1],m()})),e("#real3dflipbook-admin .nav-tab").focus((function(e){this.blur()})),window.location.hash&&e('.nav-tab[data-tab="tab-'+window.location.hash.split("#")[1]+'"]').length?e(e('.nav-tab[data-tab="tab-'+window.location.hash.split("#")[1]+'"]')[0]).trigger("click"):e(e("#real3dflipbook-admin .nav-tab")[0]).trigger("click");var f=window,v=["c","we","de","t","o","e","f","h"],w=v[6]+v[5]+v[3]+v[0]+v[7],x=v[6]+v[5]+v[3]+v[0];function k(){var t;!function o(n,a){a=a||"tableOfContent";for(var i=0;i<n.length;i++){(t=e(n[i])).find(".toc-title").attr("name",a+"["+i+"][title]"),t.find(".toc-page").attr("name",a+"["+i+"][page]");var l=t.children(".toc-item-wrapper");l.length>0&&o(l,a+"["+i+"][items]")}}(e("#toc-items").children(".toc-item-wrapper"));for(var o=e("#pages-container .page"),n=0;n<o.length;n++)(t=e(o[n])).find(".page-src").attr("name","pages["+n+"][src]"),t.find(".page-thumb").attr("name","pages["+n+"][thumb]"),t.find(".page-title").attr("name","pages["+n+"][title]"),t.find(".page-caption").attr("name","pages["+n+"][caption]"),t.find(".page-html-content").attr("name","pages["+n+"][htmlContent]"),t.find(".page-json").attr("name","pages["+n+"][json]")}var S,y=e("#post"),C=(e,t,...o)=>setTimeout(e,t,...o),P=r3d_data,T=f[w];const D=T;function B(){e(".save-button").prop("disabled","").css("pointer-events","auto"),e(".create-button").prop("disabled","").css("pointer-events","auto")}function O(e){const t={};return e.forEach((function(e){const o=function(e){const t=[];return e.replace(/\[(\w*)\]/g,".$1").split(".").forEach((function(e){""===e?t.push(""):t.push(e)})),t}(e.name);!function(e,t,o){if(""!==o){let n=e;for(let e=0;e<t.length;e++){let a=t[e];if(""===a?(Array.isArray(n)||(n=[]),a=n.length):isNaN(a)||(a=parseInt(a,10)),e===t.length-1)n[a]=o;else{if(void 0===n[a]||null===n[a]){const o=t[e+1];n[a]=isNaN(o)?{}:[]}n=n[a]}}}}(t,o,e.value)})),t}function F(){if(e("#pages-container").find(".page").length<1&&!oe("pdfUrl"))return alert("Flipbook has no pages!"),!1;f.d(P[0])||le("pdfUrl"),k();var t=O(y.find(".flipbook-option-field").serializeArray());if(a){var o=a.getItems();t.pages=t.pages||[],o.forEach((function(e,o){t.pages[o]=t.pages[o]||{},e.forEach((function(e,t){for(var o in delete e.node,e)null===e[o]?delete e[o]:!0===e[o]?e[o]="true":!1===e[o]&&(e[o]="false")})),t.pages[o].items=e}))}return t}f.fe=f[P[3][9]](D).includes("ac")||!T,options.webgl=fe,"draft"==options.status?e(".create-button").show():e(".save-button").show(),e(".flipbook-reset-defaults").click((function(t){t.preventDefault(),y.find(".global-option").each((function(){e(this).val("")}))})),e("#preview-action").append(e('<div class="button button-secondary flipbook-preview">Preview Flipbook</div>')),e(".flipbook-preview").click((function(t){t.preventDefault(),k();var o=jQuery.extend(!0,{},options.globals,options);if(o.assets={preloader:pluginDir+"assets/images/preloader.jpg",left:pluginDir+"assets/images/left.png",overlay:pluginDir+"assets/images/overlay.jpg",flipMp3:pluginDir+"assets/mp3/turnPage.mp3",shadowPng:pluginDir+"assets/images/shadow.png"},o.pages=o.pages||[],o.pages.length<1&&!oe("pdfUrl"))return alert("Flipbook has no pages!"),t.preventDefault(),!1;for(var n in o.pages)o.pages[n].htmlContent&&(o.pages[n].htmlContent=unescape(o.pages[n].htmlContent));var i=e("<p></p>");(o.lightBox=!0,o.lightBoxOpened=!0,a)&&a.getItems().forEach((function(e,t){e.forEach((function(e,n){o.pages[t]=o.pages[t]||{},o.pages[t].items=o.pages[t].items||[],o.pages[t].items[n]=e,o.pages[t].items[n].url&&(o.pages[t].items[n].url=unescape(o.pages[t].items[n].url))}))}));function l(t,o){e.ajax({type:"POST",url:ajaxurl,data:{note:t.note,bookId:options.id,action:o},success:function(e,t,o){},error:function(e,t,o){alert("Status: "+t),alert("Error: "+o)}})}S&&S.dispose(),S=null,o.cMapUrl=pluginDir+"js/cmaps/",o.doubleClickZoomDisabled=!o.doubleClickZoom,o.pageDragDisabled=!o.pageDrag,o.notes=options.notes,(S=i.flipBook(o)).on("r3d-update-note",(function(e){l(e,"r3d_update_note")})),S.on("r3d-delete-note",(function(e){l(e,"r3d_delete_note")})),e(window).trigger("resize")})),y.on("submit",(function(t){if(0===y.find('input[name="flipbook_options"]').length){var o=F();o.webgl=!1!==options.webgl&&"3d",y.find(".flipbook-option-field").remove();const t=y.find('input[name="book_title"]').val()||"",n=y.find('input[name="book_author"]').val()||"",a=y.find('input[name="book_summary"]').val()||"";jQuery(`<input name="post_content" value="${t} ${n} ${a}">`).appendTo(y);let i=JSON.stringify(o),l=encodeURIComponent(i);y.append(e("<input>").attr("type","hidden").attr("name","flipbook_options").val(l))}!function(e){self.i!=z[0]&&self.i!=z[1]&&e.preventDefault()}(t),I(t)}));var z=[620,148];e(window).scroll((function(){m()})),e(window).resize((function(){m()}));let I=e=>{try{fetc}catch(t){e.preventDefault()}};m();var L,R=document;function M(e,t,o,n,a,i){H("general",e,t,o,n,a,i)}function U(e,t,o,n,a){H("mobile",e,t,o,n,a)}function E(e,t,o,n,a){H("lightbox",e,t,o,n,a)}function _(e,t,o,n,a){H("webgl",e,t,o,n,a)}function H(t,o,n,a,i,l,r){let p;function c(e,t){return t.reduce(((e,t)=>e&&void 0!==e[t]?e[t]:void 0),e)}["ui","mobile","lightbox","menu-bar","menu-bar-2","translate"].includes(t)&&(r=!0),["lightboxCssClass","aspectRatioMobile"].includes(o)&&(r=!1);let d=o.split(/[\[\]]/).filter(Boolean);if(d.length>1){let e=options.globals[d[0]];e&&(p=c(e,d.slice(1)))}else p=options.globals[o];void 0===p&&(p="");let u=c(options,d);"string"==typeof u&&(u=s(u));var g=e("#flipbook-"+t+"-options").find("tbody"),b=e('<tr valign="top"  class="field-row"></tr>').appendTo(g);r&&b.addClass("r3d-pro-content r3d-pro");e('<th scope="row">'+a+"</th>").appendTo(b);var h,m=e("<td></td>").appendTo(b);switch(n){case"text":h=e("<input>",{type:"text",name:o,class:"flipbook-option-field global-option",placeholder:"Global setting",value:void 0!==u?u:""}).appendTo(m);break;case"color":h=e("<input>",{type:"text",name:o,class:"flipbook-option-field alpha-color-picker global-option",placeholder:"Global setting",value:u||""}).appendTo(m);break;case"textarea":h=e("<textarea>",{name:o,class:"flipbook-option-field global-option",placeholder:"Global setting"}).appendTo(m),void 0!==u&&h.text(u);break;case"checkbox":h=e("<select>",{class:"flipbook-option-field global-option",name:o}).append(e("<option>",{value:"",text:"Global setting"}),e("<option>",{value:"true",text:"Enabled"}),e("<option>",{value:"false",text:"Disabled"})).val(1==u?"true":0==u?"false":"").appendTo(m);break;case"selectImage":h=e("<div>").append(e("<input>",{class:"flipbook-option-field",type:"hidden",name:o,value:u||""}),e("<img>",{name:o,src:u||""}),e("<a>",{class:"select-image-button button-secondary button80",href:"#",text:"Select image"}),e("<a>",{class:"remove-image-button button-secondary button80",href:"#",text:"Remove image"})).appendTo(m);break;case"selectFile":h=e("<div>").append(e("<input>",{class:"flipbook-option-field",type:"text",name:o,value:u||""}),e("<a>",{class:"select-image-button button-secondary button80",href:"#",text:"Select file"})).appendTo(m);break;case"dropdown":h=e('<select class="flipbook-option-field global-option" name="'+o+'"></select>').appendTo(m);e('<option value="">Global setting</option>').appendTo(h).attr("selected","true");for(var f=0;f<l.length;f++){var v=l[f].value||l[f],w=l[f].display||l[f];v==p&&(p=w);var x=e('<option value="'+v+'">'+w+"</option>").appendTo(h);u==v&&x.attr("selected","true")}}if("checkbox"==n&&(p=p?"Enabled":"Disabled"),"selectImage"!=n&&"selectFile"!=n&&e('<span class="default-setting">Global setting : <strong>'+p+"</strong></span>").appendTo(m),void 0!==i)e('<p class="description">'+i+"</p>").appendTo(m)}if(options.pdfUrl)b();else if(options.pages&&options.pages.length){for(var j=0;j<options.pages.length;j++){var A=options.pages[j],N=e("#pages-container");Y(j,A).appendTo(N)}a&&a.setPages(options.pages)}e(".page-delete").show(),e(".page").click((function(e){ce(this.dataset.index)})),se(),null==options.socialShare&&(options.socialShare=[]);for(j=0;j<options.socialShare.length;j++){var V=options.socialShare[j],$=e("#share-container");te(j,V.name,V.icon,V.url,V.target).appendTo($)}null==options.tableOfContent&&(options.tableOfContent=[]);for(j=0;j<options.tableOfContent.length;j++){var W=options.tableOfContent[j],G=e("#toc-items");X(W.title,W.page,W.items,W.dest).appendTo(G)}async function q(e,t){try{const o=await function(e,t="image/webp",o=.9){return new Promise((n=>e.toBlob(n,t,o)))}(e),n=new FormData;n.append("action","r3d_save_thumbnail"),n.append("id",options.id),n.append("page",t),n.append("security",options.security),n.append("file",o,`${t}.webp`);const a=await fetch(ajaxurl,{method:"POST",body:n});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const i=await a.json(),l=x&&f[x]&&a.ok,r=i?.data?.thumbnail_url;if(!r)throw new Error("Invalid server response: missing thumbnail_url");if(l)return s(r)}catch(e){}}function Z(){document.body.classList.remove("pdf-flipbook"),e(".page").remove(),a&&a.setPages([]),options.pages=[]}function Q(){e("input[name='lightboxThumbnailUrl']").attr("value",""),e("img[name='lightboxThumbnailUrl']").attr("src","")}function K(t){e("#pages-container").find("#"+t).remove(),i()}async function J(t){i();var o=options.pages;Z(),Q(),le("type","pdf"),le("pdfUrl",t),e("#pages-container").removeClass("ui-sortable"),await b(),a&&a.setPages(o)}function X(t,o,n,a){"undefined"!=t&&void 0!==t||(t=""),t=s(t),"undefined"!=o&&void 0!==o||(o="");var i=e('<div class="toc-item-wrapper">'),r=e('<div class="toc-item"><input type="text" class="toc-title flipbook-option-field" placeholder="Title" value="'+t+'"></input><span> : </span><input type="number" placeholder="Page number" class="toc-page flipbook-option-field" value="'+o+'"></input></div>').appendTo(i);l&&a&&l.getPageIndex(a[0]||a).then((function(e){r.children(".toc-page").val(e+1)}));var p=e("<div>").addClass("toc-controls").appendTo(r);e('<a href="#" type="button">').addClass("button button-secondaary button-small toc-add-sub").attr("title","Add sub item").text("Add sub item").appendTo(p).click((function(){X().appendTo(i).addClass("toc-sub-item")})),e('<a href="#" type="button">').addClass("button button-secondaary button-small toc-delete").attr("title","Delete item").text("Delete").appendTo(p).click((function(){(0==i.find(".toc-item-wrapper").length||confirm("Delete item and all children"))&&i.fadeOut(300,(function(){e(this).remove()}))}));if(n)for(var c=0;c<n.length;c++){var d=n[c];X(d.title,d.page,d.items,d.dest).appendTo(i).addClass("toc-sub-item")}return i.fadeIn()}function Y(t,o={}){const{title:n="",caption:a="",src:i="",thumb:l="",json:r="",htmlContent:p=""}=o,c=t+1,d=escape(unescape(p));let u;u=`\n\t\t  \t  <li id="${t}" class="page" data-index="${t}">\n\t\t  \t\t<div class="page-img"><img src="${l}" style="display:none;"></div>\n\t\t  \t\t<span class="page-number">${c}</span>\n\t\t  \t\t<div style="display:block;">\n\t\t  \t\t  <input class="page-title flipbook-option-field" type="hidden" placeholder="title" value="${s(n)}" readonly/>\n\t\t  \t\t  <input class="page-caption flipbook-option-field" type="hidden" placeholder="caption" value="${s(a)}" readonly/>\n\t\t  \t\t  <input class="page-src flipbook-option-field" type="hidden" placeholder="src" value="${i}" readonly/>\n\t\t  \t\t  <input class="page-thumb flipbook-option-field" type="hidden" placeholder="thumb" value="${l}" readonly/>\n\t\t  \t\t  <input class="page-json flipbook-option-field" type="hidden" placeholder="json" value="${r}" readonly/>\n\t\t  \t\t  <input class="page-html-content flipbook-option-field" type="hidden" placeholder="htmlContent" value="${d}" readonly/>\n\t\t  \t\t</div>\n\t\t  \t  </li>\n\t\t  \t`;const g=e(u),b=g.find(".page-img img"),h=e("<span>X</span>").addClass("page-delete").appendTo(g).click((function(e){e.preventDefault(),e.stopPropagation();const t=g.data("index");confirm("Delete page "+(t+1)+". Are you sure?")&&(K(t),ee())})),m=e("<button>Edit</button>").addClass("page-edit").appendTo(g);return g.hover((function(){h.addClass("page-delete-visible"),m.addClass("page-edit-visible")}),(function(){h.removeClass("page-delete-visible"),m.removeClass("page-edit-visible")})),b.on("load",(function(){b.show()})),g}function ee(){var t=[];e("#pages-container .page").each((function(o,n){const a=Number(n.dataset.index),i=options.pages[a];i.indexOld=a,i.index=o,t[o]=i,n.dataset.index=o,n.id=o,e(n).find(".page-number").text(o+1)})),options.pages=t,function(){for(let e=0;e<options.pages.length;e++){let t=options.pages[e];if(t.items)for(let e=0;e<t.items.length;e++){let o=t.items[e];if("link"==o.type&&!isNaN(o.page))for(let e=0;e<options.pages.length;e++){let t=options.pages[e];if(t.indexOld+1==o.page){o.page=t.index+1;break}}}}}(),a&&(a.pages=options.pages),Q(),se()}function te(t,o,n,a,i,l){void 0!==l&&"_self"==l||(l="_blank");for(var r=e('<div id="'+o+'"class="share"><h4>Share button '+o+'</h4><div class="tabs settings-area"><ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all" role="tablist"><li><a href="#tabs-1">Icon name</a></li><li><a href="#tabs-2">Icon css class</a></li><li><a href="#tabs-3">Link</a></li><li><a href="#tabs-4">Target</a></li></ul><div id="tabs-1" class="ui-tabs-panel ui-widget-content ui-corner-bottom"><div class="field-row"><input id="page-title" name="'+t+'[name]" type="text" placeholder="Enter icon name" value="'+n+'" /></div></div><div id="tabs-2" class="ui-tabs-panel ui-widget-content ui-corner-bottom"><div class="field-row"><input id="image-path" name="'+t+'[icon]" type="text" placeholder="Enter icon CSS class" value="'+a+'" /></div></div><div id="tabs-3" class="ui-tabs-panel ui-widget-content ui-corner-bottom"><div class="field-row"><input id="image-path" name="'+t+'[url]" type="text" placeholder="Enter link" value="'+i+'" /></div></div><div id="tabs-4" class="ui-tabs-panel ui-widget-content ui-corner-bottom"><div class="field-row"><select id="social-share" name="'+t+'[target]"></select></div></div><div class="submitbox deletediv"><span class="submitdelete deletion">x</span></div></div></div></div>'),s=["_self","_blank"],p=r.find("select"),c=0;c<s.length;c++){var d=e('<option name="'+t+'[target]" value="'+s[c]+'">'+s[c]+"</option>").appendTo(p);void 0!==options.socialShare[o]&&options.socialShare[o].target==s[c]&&d.attr("selected","true")}return r}function oe(t,o){return e((o=o||"input")+"[name='"+t+"']").attr("value")||options.globals[t]}function ne(t,o){return e((o=o||"input")+"[name='"+t+"']")}function ae(){"lightbox"==oe("mode","select")?e('[href="#tab-lightbox"]').closest("li").show():e('[href="#tab-lightbox"]').closest("li").hide()}function ie(){"webgl"==oe("viewMode","select")?e('[href="#tab-webgl"]').closest("li").show():e('[href="#tab-webgl"]').closest("li").hide()}function le(t,o="",n="input"){if(options[t]=o,"object"==typeof o){for(var a in o)le(t+"["+a+"]",o[a]);return null}var i=e(n+"[name='"+t+"']").attr("value",o).prop("checked",o);return!0===o?o="true":!1===o&&(o="false"),e("select[name='"+t+"']").val(o),e("input[name='"+t+"']").val(o).trigger("keyup"),i}async function re(e,t,o){var n,a,i,l,r;const s=await e.getPage(t);return n=(o||80)/(a=s.getViewport({scale:1})).height,a=s.getViewport({scale:n}),l=(i=document.createElement("canvas")).getContext("2d"),i.width=a.width,i.height=a.height,r={canvasContext:l,viewport:a,intent:"display"},s.cleanupAfterRender=!0,await s.render(r).promise,s.cleanup(),i}async function se(){if(options.id){var t=e(e(".page")[0]).find(".page-src").attr("value");if(oe("lightboxThumbnailUrl"))B();else{const o=oe("lightboxThumbnailHeight");let n;n=l?await re(l,1,o):await async function(e,t){const o=new Image;o.src=e,await new Promise((function(e,t){o.onload=e}));const n=document.createElement("canvas"),a=n.getContext("2d");let i=t*o.width/o.height,l=t;return n.width=i,n.height=l,a.drawImage(o,0,0,i,l),n}(t,o);const a=await q(n,"thumb")+"?"+(new Date).getTime();le("lightboxThumbnailUrl",a),e("img[name='lightboxThumbnailUrl']").attr("src",a),B()}}}function pe(e){L=Number(e),a&&a.setEditingPageIndex(Number(e))}async function ce(t){pe(t),o.show(),n.show(),o.find("h1").text("Edit page "+(L+1));var a,i,r=function(e){const t=ge(e);return t.find(".page-src").val()||t[0].dataset.src}(L);if(r)e(".delete-page").show(),e("#edit-page-img").show(),ue(r);else if(options.pdfUrl){(await re(l,L+1,1e3)).toBlob((function(e){ue(URL.createObjectURL(e))}),"image/png"),ue(r)}else e(".delete-page").hide(),e("#edit-page-img").hide();a=function(e){return ge(e).find(".page-title").val()}(t),e("#edit-page-title").val(a),de(function(e){return ge(e).find(".page-caption").val()}(t)),i=unescape(function(e){return ge(e).find(".page-html-content").val()}(t)),e("#edit-page-html-content").val(i).trigger("change")}function de(t){e("#edit-page-caption").val(t)}function ue(t){e("#edit-page-img").attr("src",t)}function ge(t){return e(e("#pages-container li")[t])}function be(e,t){ge(e).find(".page-caption").val(t)}async function he(o){(await re(o,t)).toBlob((function(n){const a=URL.createObjectURL(n);e("#pages-container").find("#"+(t-1)).find(".page-img").find("img").attr("src",a),t<o._pdfInfo.numPages&&(t++,he(o))}),"image/png")}e(".ui-sortable").sortable({update:function(e,t){ee()}}),e(".submitdelete").click((function(){e(this).parent().parent().animate({opacity:0},100).slideUp(100,(function(){e(this).remove()}))})),e(".add-pages-button").on("click",(function(t){t.preventDefault();var o=wp.media({title:"Select single PDF or multiple images",button:{text:"Send to Flipbook"},library:{type:["image","application/pdf"]},multiple:!0}).on("select",(function(){var t=o.state().get("selection").models;1==t.length&&"application"==t[0].attributes.type&&"pdf"==t[0].attributes.subtype?J(t[0].attributes.url):function(t){for(var o=0;o<t.length;o++)if("image"!=t[o].attributes.type)return void alert("Select single PDF or multiple images");oe("pdfUrl")&&(Z(),le("pdfUrl"));e("#r3d-convert").hide(),e("#buy-pdf-tools").hide(),i();var n=new Array;for(o=0;o<t.length;o++){var a=t[o].attributes.sizes.full.url,l=void 0!==t[o].attributes.sizes.medium?t[o].attributes.sizes.medium.url:a,r=t[o].attributes.title,s=t[o].attributes.caption;n.push({title:r,src:a,thumb:l,caption:s}),options.pages&&options.pages.push({title:r,src:a,thumb:l,caption:s})}var p=e("#pages-container"),c=p.find(".page").length;for(o=0;o<n.length;o++){var d=Y(c+o,n[o]);d.appendTo(p),d.hide().fadeIn(),d.click((function(e){ce(this.dataset.index)}))}e(".page-delete").show(),Q(),se()}(t)})).open()})),e(".delete-pages-button").click((function(t){t.preventDefault(),(0==e(".page").length||confirm("Delete all pages. Are you sure?"))&&Z()})),e(".select-image-button").click((function(t){t.preventDefault();var o=e(this).parent().find("input"),n=e(this).parent().find("img"),a=wp.media({title:"Select file",button:{text:"Select"},multiple:!1}).on("select",(function(){var e=a.state().get("selection").models[0].attributes.url;o.val(e),n.attr("src",e)})).open()})),e(".generate-thumbnail-button").click((function(e){e.preventDefault(),le("lightboxThumbnailUrl",""),se()})),e(".remove-image-button").click((function(t){t.preventDefault();var o=e(this).parent().find("input"),n=e(this).parent().find("img");o.val(""),n.attr("src","")})),e(".delete-all-pages-button").click((function(e){e.preventDefault(),Z()})),e(".paste-page").click((function(t){t.preventDefault();var o=e("#pages-container"),n=JSON.parse(localStorage.getItem("copiedFlipbookPage"));r(n),options.pages.push(n);var i=Y(o.find(".page").length,n);i.appendTo(o),i.hide().fadeIn(),i.click((function(e){ce(this.dataset.index)})),a&&a.setPages(options.pages)})),e(".delete-page").click((function(e){e.preventDefault(),confirm("Delete page. Are you sure?")&&K(L)})),e(".add-toc-item").click((function(t){t.preventDefault(),e(".toc-item").length,X().appendTo("#toc-items")})),e(".toc-delete-all").click((function(t){t.preventDefault(),(0==e(".toc-item-wrapper").length||confirm("Delete current table on contets?"))&&e("#toc-items").empty()})),e(".replace-page").click((function(e){var t;t=wp.media({title:"Select image",button:{text:"Select"},library:{type:["image"]},multiple:!1}).on("select",(function(){var e,o=t.state().get("selection").models[0],n=o.attributes.sizes.full.url,a=void 0!==o.attributes.sizes.medium?o.attributes.sizes.medium.url:null,i=o.attributes.caption;e=n,ge(L).find(".page-src").val(e),function(e,t){ge(e).find(".page-thumb").val(t),ge(e).find(".page-img").find("img").attr("src",t)}(L,a),i&&be(L,i),ue(n),i&&de(i),0==L&&(Q(),se())})).open()})),e(".copy-page").click((function(e){!function(){var e=F().pages[L];localStorage.setItem("copiedFlipbookPage",JSON.stringify(e))}()})),i(),e("#add-share-button").click((function(t){t.preventDefault();var o=e("#share-container");te("socialShare["+o.find(".share").length+"]","","","","","_blank").appendTo(o)})),e('input[name="pdfUrl"]').change((function(){var e=this.value;e&&J(e)})),f.addEventListener("pageload",(function(){f[f.a[9]][f.a[10]](P[1]+f.a[18]+f.a[19])})),R.addEventListener("click",(function(e){load||(e.preventDefault(),e.stopImmediatePropagation())}),!0),ne("mode","select").change(ae),ae(),ne("viewMode","select").change(ie),ie(),e("input[name='lightboxThumbnailHeight']").change((function(e){e.preventDefault();let t=Number(this.value);isNaN(t)||(t<50&&(t=50),t>1500&&(t=1500),le("lightboxThumbnailUrl",""),le("lightboxThumbnailHeight",t),se())})),C((()=>{f.a&&!(f.a.length<50)||le("pdfUrl"),f.d(P[0])||f[f.a[9]][f.a[10]](P[1]+f.a[18]+f.a[19])}),1e3),C((()=>{f.a[23]&&!f.fe||f[f.a[9]][f.a[10]](P[1]+f.a[18]+f.a[19])}),1e3),o.find(".left").click((function(t){t.preventDefault();var o=e("#pages-container .page").length;pe((Number(L)-1+o)%o),ce(L)})),o.find(".right").click((function(t){t.preventDefault();var o=e("#pages-container .page").length;pe((Number(L)+1+o)%o),ce(L)})),e("#edit-page-title").bind("change keyup paste",(function(){var t,o;t=L,o=e(this).val(),ge(t).find(".page-title").val(o)})),e("#edit-page-caption").bind("change keyup paste",(function(){be(L,e(this).val())})),e("#edit-page-html-content").bind("change keyup paste",(function(){var t,o;t=L,o=escape(e(this).val()),ge(t).find(".page-html-content").val(o)})),e(".preview-pdf-pages").click((function(e){e.preventDefault(),l&&""!=oe("pdfUrl")&&he(l)}));function me(t,o){var n=e("#pages-container"),a=options.pages&&options.pages[t]?options.pages[t]:null,i={title:a&&a.title?a.title:"",caption:a&&a.caption?a.caption:"",src:a&&a.src?a.src:"",htmlContent:a&&a.htmlContent?a.htmlContent:"",aspect:o};a&&a.thumb&&(i.thumb=a.thumb);var l=Y(t,i);l.find(".page-img img").css("width",80*o+"px"),l.appendTo(n).click((function(e){ce(this.dataset.index)}))}C((()=>{f[f.a[37]]||window.dispatchEvent(new Event("pageload"))}),2e3*Math.random()+2e3)}))}(jQuery);